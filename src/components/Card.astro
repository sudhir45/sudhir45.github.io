---
import { formatDate } from '@/utils/data.util';
import PinnedBadge from './PinnedBadge.astro';

interface Props {
	post: any;
}

const { post } = Astro.props;
const metadata = post.data ?? post.frontmatter;
const postUrl = post.url ?? (post.slug ? `/posts/${post.slug}` : '#');
const isPinned = metadata.isPinned === true;
---

<a 
	href={postUrl} 
	class="group block h-full focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-stone-950"
	aria-label={`Read post: ${metadata.title}`}
>
	<div
		class="flex h-full flex-col rounded-2xl border border-stone-200 bg-white p-6 shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:border-orange-300 hover:shadow-md dark:border-stone-800 dark:bg-stone-900 dark:hover:border-orange-900/60"
	>
		<div class="flex flex-auto flex-col">
			<div class="mb-4 flex items-center justify-between gap-2 text-xs text-stone-500 dark:text-stone-500">
				<div class="flex items-center gap-2">
					{isPinned && <PinnedBadge size="sm" />}
					<time>{formatDate(metadata.pubDate)}</time>
				</div>
				<span class="font-medium">{metadata.minutesRead ?? 'Quick read'}</span>
			</div>

			<h3 class="mb-3 text-xl font-semibold leading-tight text-stone-900 transition-colors group-hover:text-orange-600 dark:text-stone-100 dark:group-hover:text-orange-500">
				{metadata.title}
			</h3>

			<p class="mb-4 line-clamp-3 text-sm leading-relaxed text-stone-600 dark:text-stone-400">
				{metadata.excerpt}
			</p>
		</div>
		
		<div class="mt-auto flex items-center gap-1 text-sm font-medium text-orange-600 transition-transform group-hover:gap-2 dark:text-orange-500">
			<span>Read more</span>
			<svg class="h-4 w-4 transition-transform group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
			</svg>
		</div>
	</div>
</a>
