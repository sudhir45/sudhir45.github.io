---
import { formatDate } from '@/utils/data.util';
import PinnedBadge from './PinnedBadge.astro';

interface Props {
	post: any;
}

const { post } = Astro.props;
const metadata = post.data ?? post.frontmatter;
const postUrl = post.url ?? (post.slug ? `/posts/${post.slug}` : '#');
const isPinned = metadata.isPinned === true;
---

<a 
	href={postUrl} 
	class="group block h-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-zinc-950"
	aria-label={`Read post: ${metadata.title}`}
>
	<div
		class="flex h-full flex-col rounded-2xl border border-zinc-200/80 bg-white/95 p-6 shadow-sm shadow-zinc-900/[0.04] transition-all duration-300 ease-out hover:-translate-y-0.5 hover:border-zinc-300 hover:shadow-xl hover:shadow-zinc-900/[0.08] dark:border-zinc-800/85 dark:bg-zinc-900/95 dark:shadow-black/20 dark:hover:border-zinc-700"
	>
		<div class="flex flex-auto flex-col">
			<div class="mb-4 flex items-center justify-between gap-2 text-xs text-zinc-500 dark:text-zinc-400">
				<div class="flex items-center gap-2">
					{isPinned && <PinnedBadge size="sm" />}
					<time>{formatDate(metadata.pubDate)}</time>
				</div>
				<span class="font-medium text-zinc-600 dark:text-zinc-300">{metadata.minutesRead ?? 'Quick read'}</span>
			</div>

			<h3 class="mb-3 text-xl font-semibold leading-tight text-zinc-900 transition-colors group-hover:text-zinc-700 dark:text-zinc-100 dark:group-hover:text-zinc-200">
				{metadata.title}
			</h3>

			<p class="mb-4 line-clamp-3 text-sm leading-relaxed text-zinc-600 dark:text-zinc-400">
				{metadata.excerpt}
			</p>
		</div>
		
		<div class="mt-auto flex items-center gap-1 text-sm font-medium text-zinc-700 transition-transform group-hover:gap-2 dark:text-zinc-300">
			<span>Read more</span>
			<svg class="h-4 w-4 transition-transform group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
			</svg>
		</div>
	</div>
</a>
