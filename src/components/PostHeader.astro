---
import { formatDate } from '@/utils/data.util';
import Section from './Section.astro';
import Tags from './Tags.astro';
import PinnedBadge from './PinnedBadge.astro';

interface Props {
	title: string;
	author: string;
	tags: string[];
	minutesRead: string;
	pubDate: string;
	isPinned?: boolean;
	img: {
		src: string;
		alt: string;
	};
}

const { title, pubDate, tags, minutesRead, img, isPinned = false } = Astro.props;

const formattedDate = formatDate(pubDate);
const estimatedReadTime = minutesRead?.trim() || 'Quick read';
---

<Section>
	<div class="flex flex-col items-center pb-8">
		{isPinned && (
			<div class="mb-4">
				<PinnedBadge size="md" />
			</div>
		)}
		<h1 class="mb-6 max-w-4xl text-center text-4xl font-bold leading-tight tracking-tight text-zinc-900 dark:text-zinc-100 md:text-5xl">
			{title}
		</h1>
		<div class="mb-6 flex flex-wrap items-center justify-center gap-3">
			<Tags tags={tags} withHref={true} />
		</div>
		<div class="mb-8 flex flex-wrap items-center justify-center gap-3 text-sm text-zinc-600 dark:text-zinc-400">
			<time datetime={String(pubDate)}>{formattedDate}</time>
			<span class="text-zinc-300 dark:text-zinc-700">Â·</span>
			<span class="inline-flex items-center gap-1.5">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="1.8"
					class="h-4 w-4"
					aria-hidden="true"
				>
					<circle cx="12" cy="12" r="9" />
					<path stroke-linecap="round" stroke-linejoin="round" d="M12 7v6l4 2" />
				</svg>
				Estimated read time: {estimatedReadTime}
			</span>
		</div>

		{img.src && (
			<div class="mb-8 w-full max-w-4xl overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800">
				<img 
					src={img.src} 
					alt={img.alt || title} 
					class="w-full object-cover" 
					loading="eager"
					fetchpriority="high"
					decoding="async"
				/>
			</div>
		)}
	</div>
</Section>
