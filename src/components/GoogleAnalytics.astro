---
const GA_MEASUREMENT_ID = import.meta.env.PUBLIC_GA_MEASUREMENT_ID;
---

{
	GA_MEASUREMENT_ID && (
		<>
			<script is:inline src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`} async></script>
			<script is:inline define:vars={{ GA_MEASUREMENT_ID }}>
				window.dataLayer = window.dataLayer || [];
				function gtag() {
					dataLayer.push(arguments);
				}
				gtag('js', new Date());
				gtag('config', GA_MEASUREMENT_ID, { anonymize_ip: true });
			</script>
		</>
	)
}
